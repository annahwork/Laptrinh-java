<link rel="stylesheet" href="../../assets/css/SC-Staff/technician_assignment.css">
<section class="technician-assignment">
    <div class="app-layout">
        <div class="content-wrapper" id="innerContent">
            <div class="main-content-area">

                <div class="search-filter-bar">
                    <div class="search-box-wrapper">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="searchBox" class="form-control search-input-with-icon"
                            placeholder="Tìm theo biển số, mã yêu cầu..." />
                    </div>
                </div>

                <div class="card filter-card">
                    <div class="filter-card-body">
                        <div class="filter-controls">
                            <select id="statusFilter" class="filter-select">
                                <option value="">Tất cả trạng thái</option>
                                <option value="approved" selected>Đã chấp thuận</option>
                                <option value="assigned">Đã phân công</option>
                            </select>
                            <input type="date" id="dateFilter" class="filter-input" />
                            <div class="filter-right">
                                <button id="btntechnician_assignment" class="btn-primary">
                                    Tạo yêu cầu mới
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body-no-padding">
                        <table class="table-zebra table-full-width">
                            <thead>
                                <tr class="table-header-row">
                                    <th>Mã Y/C</th>
                                    <th>Biển số / VIN</th>
                                    <th>Ngày tạo</th>
                                    <th>Kỹ thuật viên</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="claimsTbody">
                                <tr id="placeholderRow">
                                    <td colspan="5" class="table-placeholder-cell">
                                        Dữ liệu sẽ được load từ database — chưa có dữ liệu ở môi trường hiện tại.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="card-footer">
                        <div class="pagination-wrapper">
                            <span class="pagination-info">Hiển thị 0 của 0</span>
                            <div>
                                <button class="pagination-btn">« Trước</button>
                                <button class="btn-primary pagination-btn-active">1</button>
                                <button class="pagination-btn">Sau »</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="assignModal" class="modal modal-hidden">
                    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="assignModalTitle"
                        tabindex="-1">
                        <div class="modal-header">
                            <h3 id="assignModalTitle">Phân công Kỹ thuật viên</h3>
                            <span class="modal-close" id="assignModalClose" role="button"
                                aria-label="Đóng">&times;</span>
                        </div>

                        <form id="assignForm">
                            <div class="modal-body">
                                <p class="modal-body-text">Yêu cầu: <strong id="assignClaimCode">CLM-0001</strong></p>

                                <div class="form-group">
                                    <label class="form-label">Chọn Kỹ thuật viên</label>
                                    <select id="techSelect" class="form-control modal-select-styled" required>
                                        <option value="">-- Chọn kỹ thuật viên --</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Ghi chú (tuỳ chọn)</label>
                                    <textarea id="assignNote" class="form-control" rows="3"
                                        placeholder="Ghi chú cho kỹ thuật viên..."></textarea>
                                </div>

                                <div class="modal-footer-actions">
                                    <button type="button" class="btn" id="assignCancelBtn">Huỷ</button>
                                    <button type="submit" class="btn btn-primary">Lưu</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Modal tạo yêu cầu điều phối -->
                <div id="modalYeuCauDieuPhoi" class="technician-assign__modal" style="display:none;">
                    <div class="technician-assign__modal-content">
                        <button class="technician-assign__close-button" aria-label="Close">&times;</button>
                        <form class="technician-assign__form">
                            <h2 class="technician-assign__title">Tạo yêu cầu điều phối mới</h2>

                            <div class="technician-assign__form-group">
                                <label for="assign_code" class="technician-assign__label">Mã yêu cầu</label>
                                <input type="text" id="assign_code" class="technician-assign__input"
                                    placeholder="VD: DP2025-001" required>
                            </div>

                            <div class="technician-assign__form-group">
                                <label for="vehicle_vin" class="technician-assign__label">Biển số / VIN</label>
                                <input type="text" id="vehicle_vin" class="technician-assign__input"
                                    placeholder="VD: 51H-12345 / VN123456789" required>
                            </div>

                            <div class="technician-assign__form-group">
                                <label for="assign_date" class="technician-assign__label">Ngày yêu cầu</label>
                                <input type="date" id="assign_date" class="technician-assign__input">
                            </div>

                            <div class="technician-assign__form-group">
                                <label for="technician_name" class="technician-assign__label">Kỹ thuật viên phụ
                                    trách</label>
                                <select id="technician_name" class="technician-assign__select">
                                    <option value="">-- Chọn kỹ thuật viên --</option>
                                    <!-- Options sẽ được load từ database -->
                                </select>
                            </div>

                            <div class="technician-assign__form-group">
                                <label for="assign_location" class="technician-assign__label">Địa điểm làm việc</label>
                                <input type="text" id="assign_location" class="technician-assign__input"
                                    placeholder="VD: SC Bình Thạnh">
                            </div>

                            <div class="technician-assign__form-group">
                                <label for="assign_desc" class="technician-assign__label">Mô tả công việc</label>
                                <textarea id="assign_desc" class="technician-assign__textarea" rows="4"
                                    placeholder="VD: Kiểm tra và thay bình xe điện..."></textarea>
                            </div>

                            <div class="technician-assign__form-group">
                                <label for="assign_status" class="technician-assign__label">Trạng thái</label>
                                <select id="assign_status" class="technician-assign__select">
                                    <option value="pending">Chờ xác nhận</option>
                                    <option value="in_progress">Đang thực hiện</option>
                                    <option value="completed">Hoàn thành</option>
                                </select>
                            </div>

                            <div class="technician-assign__button-group">
                                <button type="button" id="assignCancelBtnModal"
                                    class="technician-assign__button technician-assign__button--cancel">Huỷ</button>
                                <button type="submit"
                                    class="technician-assign__button technician-assign__button--submit">Tạo</button>
                            </div>
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script src="../../assets/js/SC-Staff/technician_assignment.js"></script>
</section>