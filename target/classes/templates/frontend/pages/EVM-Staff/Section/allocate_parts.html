<link rel="stylesheet" href="/evm/assets/css/EVM-Staff/allocate_parts.css">
<script src="/evm/assets/js/EVM-Staff/allocate_parts.js"></script>
<section class="allocate-parts-page modern-layout">
    <div class="content-wrapper" id="innerContent">
        <div class="main-content-area grid-container">

            <header class="search-filter-bar card">
                <div class="search-box-wrapper">
                    <div class="search-input-group">
                        <svg class="search-icon" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M8.5 3.5a5 5 0 100 10 5 5 0 000-10zm-7 5a7 7 0 1112.67 4.15l3.68 3.68a1 1 0 01-1.42 1.42l-3.68-3.68A7 7 0 011.5 8.5z"
                                stroke="currentColor" stroke-width="1.5" />
                        </svg>
                        <input type="text" id="searchPart" class="search-input"
                            placeholder="Tìm mã, tên hoặc loại phụ tùng...">
                    </div>
                </div>
                <div class="filter-wrapper">
                    <select id="filterCategory" class="filter-select">
                        <option value="">Tất cả loại phụ tùng</option>
                        <option value="engine">Động cơ</option>
                        <option value="brake">Phanh</option>
                        <option value="suspension">Hệ thống treo</option>
                        <option value="electrical">Điện tử</option>
                    </select>
                </div>
            </header>

            <div class="parts-list-section card">
                <div class="section-header parts-list-section__header">
                    <div class="parts-list-section__title-group">
                        <h2 class="parts-list-section__title">Danh sách phụ tùng khả dụng</h2>
                    </div>

                    <div class="parts-list-section__actions">
                        <button class="btn btn-refresh icon-btn" id="refreshPartsList">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21.5 2v6h-6" />
                                <path d="M2.5 22v-6h6" />
                                <path d="M21.5 8a10 10 0 0 0-17.5 4M2.5 16a10 10 0 0 0 17.5-4" />
                            </svg>
                            Làm mới
                        </button>

                        <button class="btn btn-primary btn-allocate icon-btn" id="openAllocateModal">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect width="18" height="18" x="3" y="3" rx="2" />
                                <path d="M12 8v8" />
                                <path d="M8 12h8" />
                            </svg>
                            Phân bổ phụ tùng
                        </button>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="parts-table data-table">
                        <thead>
                            <tr>
                                <th class="text-center">Mã phụ tùng</th>
                                <th class="text-left">Tên phụ tùng</th>
                                <th class="text-center">Loại</th>
                                <th class="text-right">Số lượng tồn</th>
                                <th class="text-center">Vị trí kho</th>
                            </tr>
                        </thead>

                        <tbody id="partsTableBody">
                            <tr>
                                <td class="text-center font-monospace">PT-001</td>
                                <td class="text-left">Bộ lọc dầu</td>
                                <td class="text-center tag tag-engine">Động cơ</td>
                                <td class="text-right stock-level">25</td>
                                <td class="text-center location-tag">K1-R2</td>
                            </tr>
                            <tr>
                                <td class="text-center font-monospace">PT-002</td>
                                <td class="text-left">Bình ắc quy</td>
                                <td class="text-center tag tag-electrical">Điện tử</td>
                                <td class="text-right stock-level">8</td>
                                <td class="text-center location-tag">K2-R1</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card-footer">
                    <span class="pagination-info">Hiển thị 0 của 0</span>

                    <div class="pagination-wrapper">
                        <button class="pagination-btn">« Trước</button>
                        <button class="pagination-btn-active">1</button>
                        <button class="pagination-btn">Sau »</button>
                    </div>
                </div>
            </div>

            <div class="allocation-history-section card">
                <div class="section-header">
                    <h2>Lịch sử phân bổ gần đây</h2>
                    <p class="subtitle">Theo dõi các đợt chuyển kho gần nhất</p>
                </div>

                <div class="table-responsive">
                    <table class="history-table data-table">
                        <thead>
                            <tr>
                                <th>Mã phân bổ</th>
                                <th>Ngày</th>
                                <th>Trung tâm nhận</th>
                                <th>Số lượng</th>
                                <th>Người thực hiện</th>
                            </tr>
                        </thead>
                        <tbody id="allocationHistoryBody">
                            <tr>
                                <td class="font-monospace">ALLOC-20251103-01</td>
                                <td>03/11/2025</td>
                                <td>SC001 - Trung tâm **TP.HCM**</td>
                                <td class="text-right quantity-cell">10</td>
                                <td>Nguyễn Văn A</td>
                            </tr>
                            <tr>
                                <td class="font-monospace">ALLOC-20251104-02</td>
                                <td>04/11/2025</td>
                                <td>SC002 - Trung tâm **Hà Nội**</td>
                                <td class="text-right quantity-cell">5</td>
                                <td>Trần Thị B</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade-in" id="allocateModal" style="display: none;">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="allocateModalTitle">
            <div class="modal-header">
                <h3 id="allocateModalTitle">Phân bổ phụ tùng</h3>
                <button type="button" class="modal-close-btn" id="closeAllocateModalHeader" aria-label="Đóng modal">
                    <span aria-hidden="true">×</span>
                </button>
            </div>

            <form id="allocateForm" class="modal-form">

                <div class="form-group">
                    <label for="partSelect">Phụ tùng</label>
                    <select id="partSelect" class="form-control" required>
                        <option value="">-- Đang tải danh sách phụ tùng... --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="scCenterSelect">Trung tâm nhận</label>
                    <select id="scCenterSelect" class="form-control" required>
                        <option value="">-- Đang tải trung tâm... --</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="quantity">Số lượng phân bổ</label>
                    <input type="number" id="quantity" class="form-control" min="1" required
                        placeholder="Nhập số lượng">
                </div>

                <div class="form-footer modal-footer-actions">
                    <button type="submit" class="btn btn-confirm btn-primary">Xác nhận</button>
                    <button type="button" class="btn btn-cancel modal-close-btn" id="cancelAllocateModal">Hủy</button>
                </div>
            </form>
        </div>
    </div>
</section>